<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Free Image Library</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Dark Pattern 1: Disguised premium nag */
        .nag-banner {
            background: #f8f9fa;
            border: 1px solid #4CAF50;
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            cursor: pointer;
        }

        /* Dark Pattern 2: Forced choice modal */
        .upsell-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            z-index: 1001;
            width: 400px;
        }

        /* Dark Pattern 3: Sneaky checkbox */
        .terms-checkbox {
            opacity: 0;
            position: absolute;
            left: -9999px;
        }

        .image-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px;
            margin-top: 20px;
        }

        /* Dark Pattern 4: Fake loading state */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.8);
            z-index: 999;
        }

        /* Existing unsplash-style elements */
        .download-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <!-- Dark Pattern 5: Search bar placebo effect -->
    <input type="search" 
           class="search-bar" 
           placeholder="üîç Search 10M+ free photos..."
           id="searchInput"
           autocomplete="off">

    <!-- Disguised ad -->
    <div class="nag-banner" onclick="redirectToPlus()">
        <span style="color: #4CAF50">‚ö†Ô∏è Limited offer:</span> 
        Get 80% off Unsplash+ today ‚Üí 
    </div>

    <div class="image-grid" id="imageContainer"></div>

    <!-- Upsell modal -->
    <div class="upsell-modal" id="upsellModal">
        <h3>Want HD? <span style="color: #4CAF50">(Recommended)</span></h3>
        <p>Free users get compressed files with watermarks</p>
        <button onclick="handlePremium()" 
                style="background: #4CAF50; color: white; width: 100%">
            üîí Unlock HD (Only $9.99/month)
        </button>
        <button onclick="handleShamedDownload()" 
                style="margin-top: 12px; color: #666">
            Continue with low-quality download
        </button>
        
        <!-- Sneaky checkbox -->
        <div style="margin-top: 20px">
            <input type="checkbox" 
                   id="terms" 
                   class="terms-checkbox" 
                   checked>
            <label for="terms" style="font-size: 12px">
                I agree to marketing emails and data sharing
            </label>
        </div>
    </div>

    <!-- Fake loading overlay -->
    <div class="loading-overlay" id="loader">
        <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%)">
            Preparing your download...
        </div>
    </div>

    <script>
        const API_KEY = 'tBu1oUa1VCm3RTCRgzqE3Zu-msPE1rQQiGMbXyXXNT4';
        let currentSelection = null;

        // Load images with dark pattern
        async function loadImages(query = 'nature') {
            document.getElementById('loader').style.display = 'block';
            
            const endpoint = `https://api.unsplash.com/search/photos?query=${query}&per_page=9`;
            const res = await fetch(endpoint + `&client_id=${API_KEY}`);
            const data = await res.json();

            // Inject HD badges randomly
            document.getElementById('imageContainer').innerHTML = data.results.map(img => `
                <div class="image-card">
                    <img src="${img.urls.regular}" 
                         alt="${img.alt_description}"
                         onclick="showUpsell('${img.id}')">
                    ${Math.random() > 0.5 ? `<div class="hd-badge">HD</div>` : ''}
                    <button class="download-btn" 
                            onclick="triggerDownloadFlow('${img.urls.raw}')">
                        Download
                    </button>
                </div>
            `).join('');

            document.getElementById('loader').style.display = 'none';
        }

        // Dark pattern flow
        function triggerDownloadFlow(url) {
            currentSelection = url;
            document.getElementById('upsellModal').style.display = 'block';
        }

        function handlePremium() {
            window.location.href = 'https://unsplash.com/plus';
        }

        function handleShamedDownload() {
            // Hidden newsletter opt-in
            if(document.getElementById('terms').checked) {
                console.log('User data collected');
            }
            
            // Actual download
            const link = document.createElement('a');
            link.href = currentSelection + '&dl=force';
            link.click();
            
            document.getElementById('upsellModal').style.display = 'none';
        }

        // Initialize
        document.getElementById('searchInput').addEventListener('input', debounce(e => {
            loadImages(e.target.value);
        }, 300));

        function debounce(fn, delay) {
            let timeout;
            return (...args) => {
                clearTimeout(timeout);
                timeout = setTimeout(() => fn(...args), delay);
            };
        }

        loadImages();
    </script>
</body>
</html>
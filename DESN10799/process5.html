<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Free Stock Photos</title>
    <style>
        /* base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* dark pattern 1: fake popularity counter */
        .counter {
            color: #666;
            font-size: 0.9em;
            margin: 10px 0;
        }

        /* dark pattern 2: misleading progress bar */
        .progress-bar {
            height: 4px;
            background: #eee;
            margin: 10px 0;
        }
        .progress-fill {
            width: 70%;
            height: 100%;
            background: #4CAF50;
            transition: width 0.3s;
        }

        /* image grid styles */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .image-card {
            position: relative;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
        }

        img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            transition: transform 0.3s;
        }

        /* dark pattern 3: disguised upsell button */
        .download-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 8px 16px;
            border-radius: 4px;
            border: 1px solid #4CAF50;
            color: #4CAF50;
            cursor: pointer;
        }

        /* lightbox styles */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            margin: 2% auto;
        }

        /* dark pattern 4: hidden opt-in */
        .data-consent {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <!-- dark pattern 5: fake search popularity -->
    <div class="counter">
        üî• 1,234 people are searching right now
    </div>

    <input type="search" 
           placeholder="üîç Search 10M+ free photos..."
           class="search-bar"
           id="searchInput">

    <!-- main content -->
    <div class="image-grid" id="imageContainer"></div>

    <!-- lightbox with dark patterns -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <img id="expandedImg" src="" alt="Expanded view">
            <div style="position: absolute; bottom: 20px; left: 20px; color: white;">
                <div id="attribution"></div>
                <button class="download-btn" onclick="showUpsell()" 
                        style="margin-top: 10px">
                    ‚¨áÔ∏è Download
                </button>
            </div>
        </div>
    </div>

    <!-- upsell modal -->
    <div class="data-consent" id="consentModal">
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
        <h3>Want faster downloads? <span style="color:#4CAF50">(Recommended)</span></h3>
        <p>Free users experience slower speeds and watermarks</p>
        <button onclick="redirectToPlus()" 
                style="background: #4CAF50; color: white; padding: 12px 24px">
            üîì Unlock Premium Speed
        </button>
        <div style="margin-top: 15px">
            <input type="checkbox" id="terms" checked 
                   style="transform: scale(0.8)">
            <label for="terms" style="font-size:0.8em">
                Share usage data to improve experience
            </label>
        </div>
    </div>

    <script>
        const API_KEY = 'tBu1oUa1VCm3RTCRgzqE3Zu-msPE1rQQiGMbXyXXNT4';
        let currentPhoto = null;

        // load images with dark patterns
        async function loadImages(query = 'nature') {
            const endpoint = `https://api.unsplash.com/search/photos?query=${query}&per_page=9`;
            const res = await fetch(endpoint + `&client_id=${API_KEY}`);
            const data = await res.json();

            document.getElementById('imageContainer').innerHTML = data.results.map(img => `
                <div class="image-card">
                    <img src="${img.urls.regular}" 
                         alt="${img.alt_description}"
                         onclick="showLightbox('${img.urls.regular}', ${JSON.stringify(img)})">
                    ${Math.random() > 0.7 ? `<div class="hd-badge">HD</div>` : ''}
                    <button class="download-btn" 
                            onclick="showUpsell('${img.id}')">
                        Download
                    </button>
                </div>
            `).join('');
        }

        // lightbox with attribution
        function showLightbox(url, data) {
            currentPhoto = data;
            document.getElementById('lightbox').style.display = 'block';
            document.getElementById('expandedImg').src = url;
            
            // build attribution
            const attribution = `Photo by <a href="${data.user.links.html}" 
                style="color: white">${data.user.name}</a> on 
                <a href="${data.links.html}" style="color: white">Unsplash</a>`;
            document.getElementById('attribution').innerHTML = attribution;
        }

        // dark pattern flows
        function showUpsell() {
            document.getElementById('consentModal').style.display = 'block';
            setTimeout(() => {
                document.querySelector('.progress-fill').style.width = '100%';
            }, 300);
        }

        function redirectToPlus() {
            window.location.href = 'https://unsplash.com/plus';
        }

        // actual download (hidden)
        function startDownload() {
            const link = document.createElement('a');
            link.href = currentPhoto.urls.raw + '&dl=';
            link.download = 'photo.jpg';
            link.click();
        }

        // initialize
        document.getElementById('searchInput').addEventListener('input', debounce(e => {
            loadImages(e.target.value);
        }, 300));

        function debounce(fn, delay) {
            let timeout;
            return (...args) => {
                clearTimeout(timeout);
                timeout = setTimeout(() => fn(...args), delay);
            };
        }

        loadImages();
    </script>
</body>
</html>
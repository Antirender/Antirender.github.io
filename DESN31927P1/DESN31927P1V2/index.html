<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weather Advisor â€” Dynamic Data Demo</title>
  <link rel="icon" href="img/favicon.ico" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="stylesheet" href="styles.css" />
  <!-- Chart.js for a simple responsive line+bar combo chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <header class="site-header">
    <div class="header-row">
      <button id="nav-toggle" class="hamburger" aria-label="Open menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>

      <div class="brand">
        <img src="img/favicon.ico" alt="" class="logo">
        <strong class="brand-title">Weather Advisor</strong>
      </div>

      <form id="search-form" class="search desktop-only">
        <input id="q" type="search" placeholder="Search city (e.g., Toronto, ON)">
        <button id="btn-search" class="btn" type="submit">Search</button>
        <button id="btn-locate" class="btn btn-secondary" type="button">Use my location</button>
        <button id="theme-toggle" class="btn btn-secondary" type="button">ğŸŒ™</button>
      </form>
    </div>

    <nav id="drawer" class="drawer">
      <div class="mobile-search">
        <form id="mobile-search-form" class="search">
          <input id="mobile-q" type="search" placeholder="Search city (e.g., Toronto, ON)">
          <button id="mobile-btn-search" class="btn" type="submit">Search</button>
          <button id="mobile-btn-locate" class="btn btn-secondary" type="button">ğŸ“</button>
          <button id="mobile-theme-toggle" class="btn btn-secondary" type="button">ğŸŒ™</button>
        </form>
      </div>
      <ul>
        <li><a href="#summary">Summary</a></li>
        <li><a href="#chart">24-Hour Forecast</a></li>
        <li><a href="#advice">Outfit & Safety</a></li>
        <li><a href="#hourly">Hourly Details</a></li>
      </ul>
    </nav>
  </header>

<main class="container">
  <!-- å·¦åˆ—ï¼šSummary -->
  <section id="summary" class="card">
    <h2 class="card-title">Current Conditions</h2>
    <div class="grid-2">
      <div>
        <p class="k">City</p><p id="city-name" class="v">â€”</p>
        <p class="k">UV</p><p id="uv-now" class="v">â€”</p>
      </div>
      <div>
        <p class="k">Now (feels like)</p><p id="app-now" class="v v-orange">â€”</p>
        <p class="k">Wind</p><p id="wind-now" class="v v-green">â€”</p>
      </div>
      <div>
        <p class="k">Rain chance</p><p id="pop-now" class="v v-blue">â€”</p>
      </div>
      <div>
        <p class="k">Next 6h (minâ€“max)</p><p id="next6-range" class="v">â€”</p>
      </div>
    </div>
    <div id="summary-badges" class="badges"></div>
    <p id="summary-text" class="muted">â€”</p>
    <div id="debug-info" style="font-size:12px; color:var(--muted); margin-top:8px; font-family:monospace;"></div>
  </section>

  <!-- å³åˆ—ï¼šFavorites + About -->
  <aside class="right-col">
    <section class="card favorites">
      <h3 class="card-title">Favorites</h3>
      <form id="fav-form" class="fav-form">
        <input id="fav-alias" type="text" placeholder="Alias (optional)">
        <button id="fav-add" type="button" class="btn btn-secondary">Add current</button>
      </form>
      <ul id="fav-list" class="fav-list" aria-label="Saved cities"></ul>
    </section>

    <article class="card">
      <h3 class="card-title">About this App</h3>
      <p>This project retrieves live weather and location data from open third-party APIs. It performs lightweight data transformations and uses a rule-based expert system to generate clear outfit & safety advice. No LLMs; all logic runs locally.</p>

      <h4 class="card-subtitle">How to Use</h4>
      <ul class="bullets">
        <li>Search a city or tap <strong>Use my location</strong>.</li>
        <li>Read the current conditions and alert badges.</li>
        <li>Switch <strong>24h / 12h / 6h</strong> to explore the forecast.</li>
        <li>Check the <strong>Outfit & Safety</strong> panel for tips.</li>
        <li>Save cities to <strong>Favorites</strong> for quick access.</li>
      </ul>
    </article>
  </aside>

  <!-- å›¾è¡¨ -->
  <section id="chart" class="card">
    <div class="card-header">
      <h2 class="card-title">24-Hour Forecast</h2>
      <div class="controls">
        <label>Horizon
          <select id="horizon-select">
            <option value="24h" selected>24h</option>
            <option value="48h">48h</option>
            <option value="12h">12h</option>
            <option value="6h">6h</option>
          </select>
        </label>
        <label class="ctrl"><input id="toggle-pop" type="checkbox" checked> Show rain chance</label>
      </div>
    </div>
    <div class="chart-wrap"><canvas id="forecast-chart" height="320"></canvas></div>
    <p class="muted">Red line: <b>Feels like (Â°C)</b>. Blue bars: <b>Rain chance (%)</b>.</p>
  </section>

  <!-- æ–°åˆ†åŒºï¼šAdviceï¼ˆè§„åˆ™/ä¸“å®¶ç³»ç»Ÿè¾“å‡ºï¼‰ -->
  <section id="advice" class="card">
    <h2 class="card-title">Outfit & Safety Advice</h2>
    <p class="muted">Based on the next 6 hours of weather conditions</p>

    <div id="advice-tags" class="badges badges-row"></div>
    <div id="advice-text" class="advice-text">Loading recommendations...</div>

    <div class="two-cols suggest">
      <article class="mini-card">
        <h3 class="mini-title">WHAT TO WEAR</h3>
        <div class="chip chip-amber">RECOMMENDED</div>
        <p id="wear-text">â€”</p>
      </article>
      <article class="mini-card">
        <h3 class="mini-title">COMFORT TIPS</h3>
        <div class="chip chip-green">TIP</div>
        <p id="comfort-text">â€”</p>
      </article>
    </div>

    <div class="stats-row">
      <div class="stat"><span>ğŸŒ¡ï¸</span><b id="stat-range">â€”</b></div>
      <div class="stat"><span>ğŸŒ§ï¸</span><b id="stat-pop">â€”</b></div>
      <div class="stat"><span>â˜€ï¸</span><b id="stat-uv">â€”</b></div>
      <div class="stat"><span>ğŸ’¨</span><b id="stat-wind">â€”</b></div>
    </div>
  </section>

  <!-- Hourly è¯¦æƒ… - æ”¹ä¸ºä¸‹æ‹‰èœå•å½¢å¼ -->
  <section id="hourly" class="card">
    <details class="hourly-dropdown">
      <summary class="hourly-summary">
        <h2 class="card-title">Hourly Details</h2>
        <span class="dropdown-arrow">â–¼</span>
      </summary>
      <div id="hourly-grid" class="hourly-grid"></div>
    </details>
  </section>
</main>

<footer class="site-footer">
  <small>Data: Open-Meteo, OpenStreetMap Nominatim, Environment and Climate Change Canada (GeoMet).</small>
</footer>
</body>
</html>